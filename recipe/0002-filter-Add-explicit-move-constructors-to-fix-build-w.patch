From 80d532832bc70890af06c19c26a6f58cd1b21cd7 Mon Sep 17 00:00:00 2001
From: Ryan Volz <ryan.volz@gmail.com>
Date: Wed, 30 Sep 2020 17:30:15 -0400
Subject: [PATCH 2/2] filter: Add explicit move constructors to fix build with
 MSVC.

---
 gr-filter/include/gnuradio/filter/filterbank.h              | 2 ++
 .../include/gnuradio/filter/mmse_fir_interpolator_cc.h      | 4 +++-
 .../include/gnuradio/filter/mmse_fir_interpolator_ff.h      | 4 +++-
 .../include/gnuradio/filter/mmse_interp_differentiator_cc.h | 4 +++-
 .../include/gnuradio/filter/mmse_interp_differentiator_ff.h | 4 +++-
 gr-filter/include/gnuradio/filter/pfb_arb_resampler.h       | 6 ++++++
 gr-filter/python/filter/bindings/filterbank_python.cc       | 2 +-
 .../filter/bindings/mmse_fir_interpolator_cc_python.cc      | 2 +-
 .../filter/bindings/mmse_fir_interpolator_ff_python.cc      | 2 +-
 .../filter/bindings/mmse_interp_differentiator_cc_python.cc | 2 +-
 .../filter/bindings/mmse_interp_differentiator_ff_python.cc | 2 +-
 .../python/filter/bindings/pfb_arb_resampler_python.cc      | 2 +-
 12 files changed, 26 insertions(+), 10 deletions(-)

diff --git a/gr-filter/include/gnuradio/filter/filterbank.h b/gr-filter/include/gnuradio/filter/filterbank.h
index 47235e9fb..09838b6b3 100644
--- a/gr-filter/include/gnuradio/filter/filterbank.h
+++ b/gr-filter/include/gnuradio/filter/filterbank.h
@@ -57,6 +57,8 @@ public:
      */
     filterbank(const std::vector<std::vector<float>>& taps);
 
+    filterbank(filterbank&&) = default;
+
     /*!
      * Update the filterbank's filter taps.
      *
diff --git a/gr-filter/include/gnuradio/filter/mmse_fir_interpolator_cc.h b/gr-filter/include/gnuradio/filter/mmse_fir_interpolator_cc.h
index 300b4043f..b21a8b248 100644
--- a/gr-filter/include/gnuradio/filter/mmse_fir_interpolator_cc.h
+++ b/gr-filter/include/gnuradio/filter/mmse_fir_interpolator_cc.h
@@ -40,6 +40,8 @@ class FILTER_API mmse_fir_interpolator_cc
 public:
     mmse_fir_interpolator_cc();
 
+    mmse_fir_interpolator_cc(mmse_fir_interpolator_cc&&) = default;
+
     unsigned ntaps() const;
     unsigned nsteps() const;
 
@@ -57,7 +59,7 @@ public:
     gr_complex interpolate(const gr_complex input[], float mu) const;
 
 protected:
-    const std::vector<kernel::fir_filter_ccf> filters;
+    std::vector<kernel::fir_filter_ccf> filters;
 };
 
 } /* namespace filter */
diff --git a/gr-filter/include/gnuradio/filter/mmse_fir_interpolator_ff.h b/gr-filter/include/gnuradio/filter/mmse_fir_interpolator_ff.h
index 6f07c12df..b1ae1ced4 100644
--- a/gr-filter/include/gnuradio/filter/mmse_fir_interpolator_ff.h
+++ b/gr-filter/include/gnuradio/filter/mmse_fir_interpolator_ff.h
@@ -40,6 +40,8 @@ class FILTER_API mmse_fir_interpolator_ff
 public:
     mmse_fir_interpolator_ff();
 
+    mmse_fir_interpolator_ff(mmse_fir_interpolator_ff&&) = default;
+
     unsigned ntaps() const;
     unsigned nsteps() const;
 
@@ -55,7 +57,7 @@ public:
     float interpolate(const float input[], float mu) const;
 
 protected:
-    const std::vector<kernel::fir_filter_fff> filters;
+    std::vector<kernel::fir_filter_fff> filters;
 };
 
 } /* namespace filter */
diff --git a/gr-filter/include/gnuradio/filter/mmse_interp_differentiator_cc.h b/gr-filter/include/gnuradio/filter/mmse_interp_differentiator_cc.h
index 3da40654d..4ce7f0f89 100644
--- a/gr-filter/include/gnuradio/filter/mmse_interp_differentiator_cc.h
+++ b/gr-filter/include/gnuradio/filter/mmse_interp_differentiator_cc.h
@@ -39,6 +39,8 @@ class FILTER_API mmse_interp_differentiator_cc
 public:
     mmse_interp_differentiator_cc();
 
+    mmse_interp_differentiator_cc(mmse_interp_differentiator_cc&&) = default;
+
     unsigned ntaps() const;
     unsigned nsteps() const;
 
@@ -58,7 +60,7 @@ public:
     gr_complex differentiate(const gr_complex input[], float mu) const;
 
 protected:
-    const std::vector<kernel::fir_filter_ccf> filters;
+    std::vector<kernel::fir_filter_ccf> filters;
 };
 
 } /* namespace filter */
diff --git a/gr-filter/include/gnuradio/filter/mmse_interp_differentiator_ff.h b/gr-filter/include/gnuradio/filter/mmse_interp_differentiator_ff.h
index f1f56bf4e..e5083c8be 100644
--- a/gr-filter/include/gnuradio/filter/mmse_interp_differentiator_ff.h
+++ b/gr-filter/include/gnuradio/filter/mmse_interp_differentiator_ff.h
@@ -38,6 +38,8 @@ class FILTER_API mmse_interp_differentiator_ff
 public:
     mmse_interp_differentiator_ff();
 
+    mmse_interp_differentiator_ff(mmse_interp_differentiator_ff&&) = default;
+
     unsigned ntaps() const;
     unsigned nsteps() const;
 
@@ -57,7 +59,7 @@ public:
     float differentiate(const float input[], float mu) const;
 
 protected:
-    const std::vector<kernel::fir_filter_fff> filters;
+    std::vector<kernel::fir_filter_fff> filters;
 };
 
 } /* namespace filter */
diff --git a/gr-filter/include/gnuradio/filter/pfb_arb_resampler.h b/gr-filter/include/gnuradio/filter/pfb_arb_resampler.h
index edc0e0f6f..595bd55f4 100644
--- a/gr-filter/include/gnuradio/filter/pfb_arb_resampler.h
+++ b/gr-filter/include/gnuradio/filter/pfb_arb_resampler.h
@@ -131,6 +131,8 @@ public:
                           const std::vector<float>& taps,
                           unsigned int filter_size);
 
+    pfb_arb_resampler_ccf(pfb_arb_resampler_ccf&&) = default;
+
     /*!
      * Resets the filterbank's filter taps with the new prototype filter
      * \param taps (vector/list of floats) The prototype filter to populate the
@@ -257,6 +259,8 @@ public:
                           const std::vector<gr_complex>& taps,
                           unsigned int filter_size);
 
+    pfb_arb_resampler_ccc(pfb_arb_resampler_ccc&&) = default;
+
     /*!
      * Resets the filterbank's filter taps with the new prototype filter
      * \param taps (vector/list of complex) The prototype filter to populate the
@@ -444,6 +448,8 @@ public:
                           const std::vector<float>& taps,
                           unsigned int filter_size);
 
+    pfb_arb_resampler_fff(pfb_arb_resampler_fff&&) = default;
+
     /*!
      * Resets the filterbank's filter taps with the new prototype filter
      * \param taps (vector/list of floats) The prototype filter to populate the
diff --git a/gr-filter/python/filter/bindings/filterbank_python.cc b/gr-filter/python/filter/bindings/filterbank_python.cc
index 5e8fe340a..01cb65597 100644
--- a/gr-filter/python/filter/bindings/filterbank_python.cc
+++ b/gr-filter/python/filter/bindings/filterbank_python.cc
@@ -14,7 +14,7 @@
 /* BINDTOOL_GEN_AUTOMATIC(0)                                                       */
 /* BINDTOOL_USE_PYGCCXML(0)                                                        */
 /* BINDTOOL_HEADER_FILE(filterbank.h)                                        */
-/* BINDTOOL_HEADER_FILE_HASH(83fe60b94676b634405273d06f9a9de2)                     */
+/* BINDTOOL_HEADER_FILE_HASH(2366434b3ab6f2ecc8bbf547ccd35041)                     */
 /***********************************************************************************/
 
 #include <pybind11/complex.h>
diff --git a/gr-filter/python/filter/bindings/mmse_fir_interpolator_cc_python.cc b/gr-filter/python/filter/bindings/mmse_fir_interpolator_cc_python.cc
index 08869b8bc..c8d6169ce 100644
--- a/gr-filter/python/filter/bindings/mmse_fir_interpolator_cc_python.cc
+++ b/gr-filter/python/filter/bindings/mmse_fir_interpolator_cc_python.cc
@@ -14,7 +14,7 @@
 /* BINDTOOL_GEN_AUTOMATIC(0)                                                       */
 /* BINDTOOL_USE_PYGCCXML(0)                                                        */
 /* BINDTOOL_HEADER_FILE(mmse_fir_interpolator_cc.h) */
-/* BINDTOOL_HEADER_FILE_HASH(3e655623f15d1399828663052c1f4793)                     */
+/* BINDTOOL_HEADER_FILE_HASH(8cf5bd1cb4bd225baf466e1acec752ce)                     */
 /***********************************************************************************/
 
 #include <pybind11/complex.h>
diff --git a/gr-filter/python/filter/bindings/mmse_fir_interpolator_ff_python.cc b/gr-filter/python/filter/bindings/mmse_fir_interpolator_ff_python.cc
index a8cfab741..86b88c18b 100644
--- a/gr-filter/python/filter/bindings/mmse_fir_interpolator_ff_python.cc
+++ b/gr-filter/python/filter/bindings/mmse_fir_interpolator_ff_python.cc
@@ -14,7 +14,7 @@
 /* BINDTOOL_GEN_AUTOMATIC(0)                                                       */
 /* BINDTOOL_USE_PYGCCXML(0)                                                        */
 /* BINDTOOL_HEADER_FILE(mmse_fir_interpolator_ff.h) */
-/* BINDTOOL_HEADER_FILE_HASH(dab8e1f1a92f44a547e3324144a6afea)                     */
+/* BINDTOOL_HEADER_FILE_HASH(22ce2df7986f55adc93ca7ef61f14ae2)                     */
 /***********************************************************************************/
 
 #include <pybind11/complex.h>
diff --git a/gr-filter/python/filter/bindings/mmse_interp_differentiator_cc_python.cc b/gr-filter/python/filter/bindings/mmse_interp_differentiator_cc_python.cc
index 4a3292069..64d5866f8 100644
--- a/gr-filter/python/filter/bindings/mmse_interp_differentiator_cc_python.cc
+++ b/gr-filter/python/filter/bindings/mmse_interp_differentiator_cc_python.cc
@@ -14,7 +14,7 @@
 /* BINDTOOL_GEN_AUTOMATIC(0)                                                       */
 /* BINDTOOL_USE_PYGCCXML(0)                                                        */
 /* BINDTOOL_HEADER_FILE(mmse_interp_differentiator_cc.h) */
-/* BINDTOOL_HEADER_FILE_HASH(aad01964470a3921293b3769b3c96799)                     */
+/* BINDTOOL_HEADER_FILE_HASH(d55e51f9ae95535d5849052ec54c3aae)                     */
 /***********************************************************************************/
 
 #include <pybind11/complex.h>
diff --git a/gr-filter/python/filter/bindings/mmse_interp_differentiator_ff_python.cc b/gr-filter/python/filter/bindings/mmse_interp_differentiator_ff_python.cc
index a4c22d536..8a0059c57 100644
--- a/gr-filter/python/filter/bindings/mmse_interp_differentiator_ff_python.cc
+++ b/gr-filter/python/filter/bindings/mmse_interp_differentiator_ff_python.cc
@@ -14,7 +14,7 @@
 /* BINDTOOL_GEN_AUTOMATIC(0)                                                       */
 /* BINDTOOL_USE_PYGCCXML(0)                                                        */
 /* BINDTOOL_HEADER_FILE(mmse_interp_differentiator_ff.h) */
-/* BINDTOOL_HEADER_FILE_HASH(9e491c7a1339f371cf0bb471f15a9344)                     */
+/* BINDTOOL_HEADER_FILE_HASH(9a0b086017f0506579074a4fe2847d84)                     */
 /***********************************************************************************/
 
 #include <pybind11/complex.h>
diff --git a/gr-filter/python/filter/bindings/pfb_arb_resampler_python.cc b/gr-filter/python/filter/bindings/pfb_arb_resampler_python.cc
index ec8c77c3d..3470adbbd 100644
--- a/gr-filter/python/filter/bindings/pfb_arb_resampler_python.cc
+++ b/gr-filter/python/filter/bindings/pfb_arb_resampler_python.cc
@@ -14,7 +14,7 @@
 /* BINDTOOL_GEN_AUTOMATIC(0)                                                       */
 /* BINDTOOL_USE_PYGCCXML(0)                                                        */
 /* BINDTOOL_HEADER_FILE(pfb_arb_resampler.h)                                        */
-/* BINDTOOL_HEADER_FILE_HASH(570f7b04a6fbd6777837fb50a9a7d205)                     */
+/* BINDTOOL_HEADER_FILE_HASH(ff06715b19183d53ddcefe5aab7e1c1e)                     */
 /***********************************************************************************/
 
 #include <pybind11/complex.h>
-- 
2.20.1

